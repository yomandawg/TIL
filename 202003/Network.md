# 네트워크

> 네트워크 개념


## IP

* 인터넷 망에 접속하기 위해, NIC 공인기관에서 할당하는 공인 IP를 사용해야 함
* 사용자는 ISP 업체로부터 공인 주소를 임대받아 인터넷에 접속함

> * IPv4 -IP 통신에 필요한 고유 주소
>   * 2^32 == 32비트(8bit $\times$ 4) 10진수로 나타냄
> * IPv6 - IPv4 고갈을 대비해 만듦
>   * 2^128 == 128비트(16bit $\times$ 8) 16진수로 나타냄

```
예약 IP

0.0.0.0 ~ 0.255.255.255 (0.0.0.0/8, common: 0.0.0.0): 임시 IP
10.0.0.0 ~ 10.255.255.255 (10.0.0.0/8): 사설 IP, A class network
100.64.0.0 ~ 100.127.255.255 (100.64.0.0/10): IPv4 고갈 대비 추가 사설 IP
127.0.0.0 ~ 127.255.255.255 (127.0.0.0/8, common: 127.0.0.1): self; aka. loopback
169.254.0.0 ~ 169.254.255.255 (169.254.0.0/16): DHCP 서버를 찾지 못할 경우 클라이언트가 스스로 할당하는 IP; aka APIPA
172.16.0.0 ~ 172.31.255.255 (172.16.0.0/12): 사설 IP, B class network
192.88.99.0 ~ 192.88.99.255 (192.88.99.0/24): IPv6 <=> IPv4 연결용 IP

192.168.0.0 ~ 192.168.255.255 (192.168.0.0/16): 사설 IP, C class network
    - 가장 많이 사용하는 공유기용 대역
```

## 서브넷 마스크

* IPv4 주소의 고갈을 늦추기 위해 각 라우터가 broadcasting하는 로컬 네트워크 영역에 공인 IP 대역을 호스트가 필요한 만큼만 할당하려 한다
* 이러한 요구에 맞춰 로컬 네트워크 내부에서 접속한 호스트의 IP 대역을 외부 네트워크와 명확히 구분할 수 있는 수단을 표준화 한 것이 subnet mask

* IP 주소에 대한 네트워크 아이디와 호스트 아이디를 구분하기 위해 사용

* 서브넷 마스크 계산 방법 - 논리 AND
* 192.168.0.1 == 192.168.0.1 서브넷마스크:255.255.255.0
  * /24 == /255.255.255.0 (앞에서부터 32비트 환산)
```
예: 192.168.0.1/24
1100 0000 . 1010 1000 . 0000 0000 . 0000 0001 - IP주소
1111 1111 . 1111 1111 . 1111 1111 . 0000 0000 - 서브넷 마스크
1100 0000 . 1010 1000 . 0000 0000 . 0000 0000 - 서브넷 네트워크

호스트 개수: 네트워크 주소와 브로드캐스트 주소를 제외한 254개
네트워크 개수 1개
```

```
예2
IP주소: 192.168.1.0
서브넷마스크: 255.255.255.0

서브넷마스크로 논리 AND 연산을 하면
네트워크 아이디: 192.168.1
호스트 아이디: .0

따라서 범위는 192.168.1.0 ~ 192.158.1.255

예3
IP주소: 192.168.1.0
서브넷마스크: 255.255.0.0
=>
네트워크 아이디: 192.168.
호스트 아이디: .0.1

=> 범위: 192.168.0.0 ~ 192.168.255.255
```


## DHCP

> Dynamic Host Configuration Protocol - 동적 호스트 설정 프로토콜

* IP 라우터는 인터페이스 및 호스트에 IP 주소를 할당한다. 초창기엔 각 PC마다 고정 IP를 설정했는데, IP설정에 실수가 있는 경우 인터넷이 안되거나 동일한 IP를 할당하여 충돌이 나는 경우도 비일비재했다. 그 외에 사용하지 않는 호스트까지 IP를 할당하다보니 IP가 모자라는 문제도 있었다. 그래서 나온 것이 DHCP
* 사용할 때만 IP를 할당하는 동적 설정 프로토콜
* 라우터는 단지 게이트웨이 역할만 하고, DHCP 서버는 별도로 두는 구성도 있다

* DHCP Server
  * IP를 분배해주는 역할 - 통신사 전화국, 단지 네트워크 장비, 인터넷 공유기 등
* DHCP Client
  * 서버로부터 IP를 할당받아 사용; 임대, 갱신, 반환 동작

* 임대, 갱신, 반환
  * Discover, Offer, Request, ACKnowledge 패킷
  * 임대(Lease): **DORA**; 정해진 *기간*동안 IP 할당
  * 갱신(Renewal): **RA**; 임대 기간이 끝나기 전 갱신을 통해 불필요한 broadcast 트래픽을 방지
    * `ipconfig /renew`
  * 반환(Release)
    * `ipconfig /release`


## Gateway

* OSI 7 Layer 중 Transport(전송) 계층에 해당하는 기기로 서로 다른 프로토콜끼리 네트워크 통신이 가능하도록 연결해주는 기기.
  * 패킷을 대신 보내거나 받는다
  * 주소를 적절한 IP Address로 변환한다


## Proxy Server

> aka *Deric*, 대리 서버

* 클라이언트와 서버 사이에서 데이터를 간접적으로 전달해 주는 서버
* 일부는 요청된 내용을 캐시로 저장한다. 후에 캐시 안의 정보를 요구하는 요청에는 원격 서버에 접속하여 데이터를 가져올 필요가 없으므로 전송 시간 절약 및 트래픽 저감 효과


## MAC Address

> Media Access Control

* MAC: OSI 모델의 데이터링크 계층 프로토콜
* NIC의 제조업체가 할당
  * `getmac`
* IP 주소로 접근했을 때, 해당 기기를 식별하기 위한 고유 ID
  * 한 번 부여도니 MAC은 바뀌지 않는다
* 가상으로 부여해서 다른 MAC 주소를 가진 것처럼 동작 가능
  * MAC이 차단받으면 우회로 접속 가능


## NIC

> Network Interface Card

* 물리계층 + 데이터링크계층
* 이더넷 카드, 네트워크 어댑터, 랜카드로 불리며 컴퓨터간 신호를 주고받는 하드웨어


## LAN

> Local Area Network

* 근거리 통신망
* 특정한 범위 내에 독립된 네트워크를 구축한 것
  * LAN을 구축하면 LAN 외부에서는 LAN 내부에 접근할 수 없음
* 규격: Ethernet, Wi-Fi


## NAT

> Network Address Translation

* public outside address와 private inside address의 사이에서 border router로서 역할
* 내부망에서는 사설 IP주소를 사용해 통신하고, 외부망 통신시 NAT을 거쳐 공인 IP 주소로 변환
* 사설 네트워크에 속한 여러 개의 호스트가 하나의 공인 IP주소를 사용해 인터넷에 접속하기 위함